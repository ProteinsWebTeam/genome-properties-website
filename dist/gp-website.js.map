{"version":3,"file":"gp-website.js","sources":["../src/genprop-parser.js","../src/genprop-hierarchy-parser.js","../src/index.js"],"sourcesContent":["const mainKeys = {\n  AC: 'accession',\n  DE: 'name',\n  TP: 'type',\n  TH: 'threshold',\n};\nconst refKeys = {\n  RM:\t'PMID',\n  RT:\t'title',\n  RA:\t'author',\n  RL:\t'citation',\n}\nconst stepKeys = {\n  ID:\t'id',\n  DN:\t'name',\n  RQ:\t'requires',\n}\nconst parseGenProp = (txt) => {\n  const property = {\n    references: [],\n    databases: [],\n    steps: [],\n    description: '',\n    notes: '',\n  };\n  let currentRef = null;\n  let currentDB = null;\n  let currentStep = null;\n  let currentEV = null;\n  txt.split('\\n').forEach(line=>{\n    const key = line.substr(0,2);\n    const value = line.substr(3).trim();\n    if (key in mainKeys) property[mainKeys[key]] = value;\n\n    // References\n    if (key === 'RN') {\n      currentRef = {number: Number(value.replace('[','').replace(']',''))}\n      property.references.push(currentRef);\n    }\n    if (key in refKeys && currentRef) currentRef[refKeys[key]] = value;\n\n    // Databases\n    if (key === 'DC') {\n      currentDB = {title: value}\n      property.databases.push(currentDB);\n    }\n    if (key === 'DR' && currentDB) currentDB['link'] = value;\n\n    // Description\n    if (key === 'CC') property.description += value + ' ';\n\n    // Notes\n    if (key === '**') property.notes += value + ' ';\n\n    // Steps\n    if (key === 'SN') {\n      currentStep = {\n        number: Number(value),\n        evidence_list: [],\n      }\n      property.steps.push(currentStep);\n    }\n    if (key in stepKeys && currentStep) currentStep[stepKeys[key]] = value;\n    // Evidence\n    if (key === 'EV' && currentStep) {\n      currentEV = {evidence: value}\n      currentStep.evidence_list.push(currentEV);\n    }\n    if (key === 'TG' && currentStep && currentEV) currentEV['go'] = value;\n\n  });\n  return property;\n  // console.log(property);\n  // return `<pre>${JSON.stringify(property, null, '  ')}</pre>`;\n};\n\n\nexport default parseGenProp;\n","const parseGenPropHierarchy = (txt) => {\n  const hierarchy = {};\n  txt.split('\\n').forEach(line => {\n    const parts = line.split('\\t');\n    if (parts[0].trim() !== '') {\n      if (!(parts[0] in hierarchy))\n        hierarchy[parts[0]] = {\n          id: parts[0],\n          name: parts[1],\n          // parents: [],\n          children: [],\n        }\n      if (!(parts[2] in hierarchy))\n        hierarchy[parts[2]] = {\n          id: parts[2],\n          name: parts[3],\n          // parents: [],\n          children: [],\n      }\n      hierarchy[parts[0]].children.push(hierarchy[parts[2]])\n    }\n  });\n  return hierarchy;\n}\n\nexport default parseGenPropHierarchy;\n","import showdown from \"showdown\";\nimport parseGenProp from \"./genprop-parser\";\nimport parseGenPropHierarchy from \"./genprop-hierarchy-parser\";\n\nclass GenomePropertiesWebsite {\n  constructor(selector) {\n    this.container = document.querySelector(selector);\n    window.onhashchange = () => this.loadContent();\n    this.cache = {};\n    this.loadContent();\n    window.onclick = function(ev){\n      if (ev.srcElement.localName === \"a\" &&\n          ev.srcElement.parentNode.localName === \"li\" &&\n          ev.srcElement.parentNode.className.indexOf(\"tabs-title\")>-1\n      ){\n        document.querySelectorAll(\"#step-tabs li a\").forEach(e=>e.setAttribute(\"aria-selected\", null));\n        document.querySelectorAll(\"#step-tabs li\").forEach(e=>e.classList.remove(\"is-active\"));\n        ev.srcElement.setAttribute(\"aria-selected\", true);\n        ev.srcElement.parentNode.classList.add(\"is-active\");\n        document.querySelectorAll(\"div[data-tabs-content=step-tabs] .tabs-panel\").forEach(e=>e.classList.remove(\"is-active\"));\n        const target = ev.srcElement.getAttribute(\"target\");\n        document.querySelector(target).classList.add(\"is-active\");\n      } else if (ev.srcElement.localName === \"a\" &&\n        ev.srcElement.parentNode.localName === \"header\" &&\n        ev.srcElement.parentNode.parentNode.localName === \"div\" &&\n        ev.srcElement.parentNode.parentNode.className.indexOf(\"genome-property\")>-1\n      ){\n        const expanded =ev.srcElement.parentNode.parentNode.className.indexOf(\"expanded\") > -1;\n        if (expanded){\n          ev.srcElement.innerHTML = '▸';\n          ev.srcElement.parentNode.parentNode.classList.remove(\"expanded\");\n        } else {\n          ev.srcElement.innerHTML = '▾';\n          ev.srcElement.parentNode.parentNode.classList.add(\"expanded\");\n        }\n      }\n    }\n  }\n  loadContent() {\n    switch (location.hash) {\n      case \"#home\": case \"\":\n        this.container.innerHTML = this.getHome();\n        break;\n      case \"#docs\":\n        this.container.innerHTML = this.getDocs();\n        break;\n      case \"#properties\":\n        this.container.innerHTML = this.getProps();\n        break;\n      default:\n        if (location.hash.match(/^#GenProp\\d{4}$/)){\n          this.container.innerHTML = this.getGenProp(location.hash.substr(1));\n          return;\n        }\n\n        this.container.innerHTML = \"404: Not found\";\n        console.log(\"other\", location.hash);\n    }\n  }\n  embbedInSection(html){\n    return `\n    <div class=\"columns\">\n      <section>\n        ${html}\n      </section>\n    </div>\n    `;\n\n  }\n  markup2html(txt, key) {\n    const converter = new showdown.Converter();\n    return converter.makeHtml(txt);\n  }\n  getResource(key, url, loader){\n    if (key in this.cache)\n      return this.cache[key];\n    fetch(url)\n      .then(a=>a.text())\n      .then(a=>{\n        const html = loader(a);\n        this.cache[key] = this.embbedInSection(html);\n        this.loadContent();\n      })\n      .catch(a=>console.error(a));\n\n    return this.embbedInSection('loading...');\n  }\n  renderGenProp(property){\n    return `\n    <h2>${property.accession}</h2>\n      <h3>${property.name}</h3>\n      <span class=\"tag\">${property.type}</span> <span class=\"tag secondary\">Trashhold: ${property.threshold}</span>\n      <br/><br/>\n      <div class=\"row\">\n        <h4>Description</h4>\n        <p>${property.description}</p>\n      </div>\n      <div class=\"row\">\n        <h4>Databases</h4>\n        <ul>\n          ${property.databases.map(db => `\n            <li><b>${db.title}</b>: ${db.link}</li>\n          `).join('')}\n        </ul>\n      </div>\n      <div class=\"row\">\n        <h4>Steps</h4>\n        <div class=\"medium-3 columns\">\n          <ul class=\"vertical tabs\" data-tabs id=\"step-tabs\">\n            ${property.steps.map((step,i) => `\n              <li class=\"tabs-title ${i===0?'is-active':''}\">\n                <a target=\"#panel${step.number}\" ${i===0?'aria-selected=\"true\"':''}>Step ${step.number}</a>\n              </li>\n            `).join('')}\n          </ul>\n        </div>\n        <div class=\"medium-9 columns\">\n          <div class=\"tabs-content\" data-tabs-content=\"step-tabs\">\n          ${property.steps.map((step,i) => `\n            <div class=\"tabs-panel ${i===0?'is-active':''}\" id=\"panel${step.number}\">\n              <h5>${step.id}</h5>\n              <p>Requires Step ${step.requires}</p>\n              <table>\n                <tr>\n                  <th>Evidence</th>\n                  <th>Go Terms</th>\n                </tr>\n                ${step.evidence_list.map((e,i) => `\n                  <tr>\n                    <td>${e.evidence}</td>\n                    <td>${e.go}</td>\n                  </tr>\n                `).join('')}\n              </table>\n            </div>\n          `).join('')}\n          </div>\n        </div>\n      </div>\n      <div class=\"row\">\n        <h4>Notes</h4>\n        <p>${property.notes}</p>\n      </div>\n      <div class=\"row\">\n        <h4>References</h4>\n        <ul>\n          ${property.references.map(ref => `\n              <li class=\"reference\">\n                <span class=\"index\">${ref.number}</span>\n                <span class=\"authors\">${ref.author}</span>\n                <span class=\"citation\">${ref.title}</span>\n                <span class=\"citation\">${ref.citation}</span>\n                <span class=\"reference_id\">${ref.PMID}</span>\n                <a target=\"_blank\" rel=\"noopener\" href=\"https://europepmc.org/abstract/MED/${ref.PMID}\">EuropePMC</a>\n              </li>\n          `).join('')}\n        </ul>\n      </div>\n\n    `;\n  }\n  renderGenPropHierarchy(hierarchy, expanded=true, level=1){\n    return `\n    <div class=\"genome-property ${expanded?'expanded':''}\">\n      <header>\n        ${!hierarchy.children.length?'・':`\n        <a style=\"border: 0;color: darkred;\">${expanded?'▾':'▸'}</a>\n        `}\n        <a href=\"#${hierarchy.id}\">${hierarchy.id}</a>: ${hierarchy.name}\n      </header>\n      ${!hierarchy.children.length?'':`\n        <div class=\"children\" style=\"\n          margin-left: ${level*10}px;\n        \">\n          ${hierarchy.children\n            .map(child => this.renderGenPropHierarchy(child, false, level+1))\n            .join('')}\n        </div>\n      `}\n    </div>\n    `;\n  }\n  getGenProp(acc){\n    const url = `https://raw.githubusercontent.com/rdfinn/genome-properties/master/data/${acc}/DESC`\n    return this.getResource(acc, url, txt => this.renderGenProp(parseGenProp(txt)))\n  }\n  getHome(){\n    return this.getResource('home', 'https://raw.githubusercontent.com/rdfinn/genome-properties/master/docs/background.rst', this.markup2html)\n  }\n  getDocs(){\n    return this.getResource('docs', 'https://raw.githubusercontent.com/rdfinn/genome-properties/master/docs/index.rst', this.markup2html)\n  }\n  getProps(){\n    return this.getResource('props', 'files/gp.primary_dag.txt', txt => {\n      return '<h1>Hierarchy</h1>'+this.renderGenPropHierarchy(parseGenPropHierarchy(txt)['GenProp0065'])\n      // return `<pre>${JSON.stringify(parseGenPropHierarchy(txt)['GenProp0065'], null, ' ')}</pre>`;\n    })\n  }\n}\n\nexport default GenomePropertiesWebsite;\n"],"names":["mainKeys","refKeys","stepKeys","parseGenProp","txt","property","currentRef","currentDB","currentStep","currentEV","split","forEach","key","line","substr","value","trim","number","Number","replace","references","push","title","databases","description","notes","steps","evidence","evidence_list","parseGenPropHierarchy","hierarchy","parts","children","GenomePropertiesWebsite","selector","container","document","querySelector","onhashchange","loadContent","cache","onclick","ev","srcElement","localName","parentNode","className","indexOf","querySelectorAll","e","setAttribute","classList","remove","add","target","getAttribute","expanded","innerHTML","location","hash","getHome","getDocs","getProps","match","getGenProp","log","html","converter","showdown","Converter","makeHtml","url","loader","then","a","text","embbedInSection","catch","console","error","accession","name","type","threshold","map","db","link","join","step","i","id","requires","go","ref","author","citation","PMID","level","length","renderGenPropHierarchy","child","acc","getResource","renderGenProp","markup2html"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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"}