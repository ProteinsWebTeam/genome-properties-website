{"version":3,"file":"gp-website.js","sources":["../src/genprop-parser.js","../src/genprop-hierarchy-parser.js","../src/rst-renderer.js","../src/index.js"],"sourcesContent":["const mainKeys = {\n  AC: 'accession',\n  DE: 'name',\n  TP: 'type',\n  TH: 'threshold',\n};\nconst refKeys = {\n  RM:\t'PMID',\n  RT:\t'title',\n  RA:\t'author',\n  RL:\t'citation',\n}\nconst stepKeys = {\n  ID:\t'id',\n  DN:\t'name',\n  RQ:\t'requires',\n}\nconst parseGenProp = (txt) => {\n  const property = {\n    references: [],\n    databases: [],\n    steps: [],\n    description: '',\n    notes: '',\n  };\n  let currentRef = null;\n  let currentDB = null;\n  let currentStep = null;\n  let currentEV = null;\n  txt.split('\\n').forEach(line=>{\n    const key = line.substr(0,2);\n    const value = line.substr(3).trim();\n    if (key in mainKeys) property[mainKeys[key]] = value;\n\n    // References\n    if (key === 'RN') {\n      currentRef = {number: Number(value.replace('[','').replace(']',''))}\n      property.references.push(currentRef);\n    }\n    if (key in refKeys && currentRef) currentRef[refKeys[key]] = value;\n\n    // Databases\n    if (key === 'DC') {\n      currentDB = {title: value}\n      property.databases.push(currentDB);\n    }\n    if (key === 'DR' && currentDB) currentDB['link'] = value;\n\n    // Description\n    if (key === 'CC') property.description += value + ' ';\n\n    // Notes\n    if (key === '**') property.notes += value + ' ';\n\n    // Steps\n    if (key === 'SN') {\n      currentStep = {\n        number: Number(value),\n        evidence_list: [],\n      }\n      property.steps.push(currentStep);\n    }\n    if (key in stepKeys && currentStep) currentStep[stepKeys[key]] = value;\n    // Evidence\n    if (key === 'EV' && currentStep) {\n      currentEV = {evidence: value}\n      currentStep.evidence_list.push(currentEV);\n    }\n    if (key === 'TG' && currentStep && currentEV) currentEV['go'] = value;\n\n  });\n  return property;\n  // console.log(property);\n  // return `<pre>${JSON.stringify(property, null, '  ')}</pre>`;\n};\n\n\nexport default parseGenProp;\n","const parseGenPropHierarchy = (txt) => {\n  const ignore = ['GenProp0068']\n  const hierarchy = {};\n  txt.split('\\n').forEach(line => {\n    const parts = line.split('\\t');\n    if (parts[0].trim() !== '' &&\n        ignore.indexOf(parts[0])==-1 &&\n        ignore.indexOf(parts[2])==-1\n    ) {\n      if (!(parts[0] in hierarchy))\n        hierarchy[parts[0]] = {\n          id: parts[0],\n          name: parts[1],\n          // parents: [],\n          children: [],\n        }\n      if (!(parts[2] in hierarchy))\n        hierarchy[parts[2]] = {\n          id: parts[2],\n          name: parts[3],\n          // parents: [],\n          children: [],\n      }\n      hierarchy[parts[0]].children.push(hierarchy[parts[2]])\n    }\n  });\n  return hierarchy;\n}\n\nexport default parseGenPropHierarchy;\n","import showdown from \"showdown\";\n\nconst blockType = {\n  SUBSTITUTION: 1,\n  INCLUDE: 2,\n  OTHER:-1,\n}\n\nexport class RstRenderer {\n  constructor(server, manager){\n    this.converter = new showdown.Converter();\n    this.server = server;\n    this.substitutions = {};\n    this.manager = manager;\n  }\n\n  parseBlock(block){\n    const obj = {};\n    const lines = block.split('\\n');\n    const parts  = lines[0].split('|');\n    if (parts.length==3 && parts[0].trim()==='..'){\n      obj.type = blockType.SUBSTITUTION;\n      obj.key = parts[1];\n      const value = parts[2].split('::');\n      obj.value = {\n        type: value[0].trim(),\n        value: value[1].trim(),\n        attributes: {}\n      }\n    } else {\n      const parts2  = lines[0].split(' ');\n      if (parts2.length==3 && parts2[1]===\"include::\"){\n        obj.type = blockType.INCLUDE;\n        obj.value = parts2[2];\n      }else{\n        obj.type = blockType.OTHER;\n        obj.value = lines[0].substr(3);\n      }\n    }\n    for (let i=1;i<lines.length;i++){\n      if (obj.type === blockType.SUBSTITUTION){\n        const attr = lines[i].split(':');\n        if (attr.length > 2 && attr[1].trim() !== \"\"){\n          obj.value.attributes[attr[1]] = attr.slice(2).join(':');\n        }\n      } else {\n        obj.value += lines[i].trim()\n      }\n    }\n    return obj;\n  }\n\n  extractBlocks(txt){\n    let block = '';\n    let text = txt.split('\\n').map(line => {\n      if (line.indexOf('..')===0) {\n        block += line+'\\n';\n        return '';\n      }\n      if (block !== ''){\n        if (line.indexOf('  ')===0 && line.trim()!==''){\n          block += line+'\\n';\n          return '';\n        }else{\n          const objBlock = this.parseBlock(block);\n          switch (objBlock.type){\n            case blockType.SUBSTITUTION:\n              this.substitutions[objBlock.key] = objBlock;\n              break;\n            case blockType.INCLUDE:\n              return this.manager.getResource(\n                `INCLUDE_${objBlock.value}`,\n                `${this.server}/docs/${objBlock.value}`,\n                this.markup2html.bind(this),\n                `INCLUDE_${objBlock.value}`,\n                false\n              );\n              // return 'INCLUDE: '+objBlock.value;\n          }\n          block='';\n        }\n      }\n      return line;\n    }).join('\\n');\n\n    return text;\n  }\n  renderHTMLAtrributes(list, ignore=[]){\n    return Object.keys(list)\n      .filter(k=>ignore.indexOf(k)===-1)\n      .map(k=>k+`=\"${list[k]}\"`)\n      .join(\"\");\n  }\n  applySubstitutions(txt) {\n    let newText = txt;\n    for (const key in this.substitutions){\n      const value = this.substitutions[key].value;\n      let replacement = '';\n      if (value.type==\"image\"){\n        replacement = `<img src=\"${this.server}/docs/${value.value}\" ${\n          this.renderHTMLAtrributes(value.attributes, ['alt','target'])\n        }/>`;\n        if (\"target\" in value.attributes)\n          replacement = `<a href=\"${value.attributes.target}\" ${\n            this.renderHTMLAtrributes(value.attributes, ['value', 'target'])\n          }>${\n            replacement\n          }</a>`\n      } else {\n        replacement = value.value;\n      }\n      // console.log(`|${key}|`,replacement);\n      newText = newText.replace(`|${key}|`,replacement);\n    }\n    return newText;\n  }\n  // applyIncludes(txt) {\n  //   let newText = txt;\n  //   for (const key in this.includes){\n  //     const value = this.includes[key].value;\n  //     let replacement = '';\n  //     if (value.type==\"image\"){\n  //       replacement = `<img src=\"${this.server}/docs/${value.value}\" ${\n  //         this.renderHTMLAtrributes(value.attributes, ['alt','target'])\n  //       }/>`;\n  //       if (\"target\" in value.attributes)\n  //         replacement = `<a href=\"${value.attributes.target}\" ${\n  //           this.renderHTMLAtrributes(value.attributes, ['value', 'target'])\n  //         }>${\n  //           replacement\n  //         }</a>`\n  //     } else {\n  //       replacement = value.value;\n  //     }\n  //     console.log(`|${key}|`,replacement);\n  //     newText = newText.replace(`|${key}|`,replacement);\n  //   }\n  //   return newText;\n  // }\n  toMDTables(txt) {\n    let onTable = false;\n    return txt.split('\\n').map(l=>{\n      const isRow = l.indexOf('+--')===0;\n      const partOfTable = l.indexOf('|')===0;\n      if (!onTable && isRow){\n        onTable=true;\n        return '<table>';\n      }\n      if (onTable && isRow) return '';\n      if (onTable && !isRow && partOfTable){\n        return '<tr><td>'+l.split('|').slice(1,-1).join('</td><td>')+'</td></tr>'\n      }\n      if (onTable && !isRow && !partOfTable){\n        onTable = false;\n        return '</table>';\n      }\n      return l;\n    }).join('\\n');\n  }\n  markup2html (txt) {\n    // let text = txt\n      // .replace(\"[BUTTON_BROWSE]\",\n      //   `<a href=\"#browse\"><img width=\"48%\" src=\"${this.server}/docs/_static/images/browse_icon_s.jpeg\"></a>`)\n      // .replace(\"[BUTTON_VIEWER]\",\n      //   `<a href=\"#viewer\"><img width=\"48%\" src=\"${this.server}/docs/_static/images/matrix_icon.png\"></a>`);\n    let text = this.extractBlocks(txt)\n    text = this.applySubstitutions(text);\n    text = this.toMDTables(text)\n    return '<br/>'+this.converter.makeHtml(text);\n  }\n\n}\n","import parseGenProp from \"./genprop-parser\";\nimport parseGenPropHierarchy from \"./genprop-hierarchy-parser\";\nimport {RstRenderer} from \"./rst-renderer\";\n\nclass GenomePropertiesWebsite {\n  constructor(selector) {\n    this.selector = selector;\n    this.container = document.querySelector(selector);\n    this.github = \"https://raw.githubusercontent.com/rdfinn/genome-properties/master\";\n    window.onhashchange = () => this.loadContent();\n    this.cache = {};\n    this.loadContent();\n    window.onclick = function(ev){\n      if (location.hash.match(/^#GenProp\\d{4}$/) &&\n          ev.target.localName === \"a\" &&\n          ev.target.parentNode.localName === \"li\" &&\n          ev.target.parentNode.className.indexOf(\"tabs-title\")>-1\n      ){\n        document.querySelectorAll(\"#step-tabs li a\").forEach(e=>e.setAttribute(\"aria-selected\", null));\n        document.querySelectorAll(\"#step-tabs li\").forEach(e=>e.classList.remove(\"is-active\"));\n        ev.target.setAttribute(\"aria-selected\", true);\n        ev.target.parentNode.classList.add(\"is-active\");\n        document.querySelectorAll(\"div[data-tabs-content=step-tabs] .tabs-panel\").forEach(e=>e.classList.remove(\"is-active\"));\n        const target = ev.target.getAttribute(\"target\");\n        document.querySelector(target).classList.add(\"is-active\");\n      } else if (ev.target.localName === \"a\" &&\n        ev.target.parentNode.localName === \"header\" &&\n        ev.target.parentNode.parentNode.localName === \"div\" &&\n        ev.target.parentNode.parentNode.className.indexOf(\"genome-property\")>-1\n      ){\n        const expanded =ev.target.parentNode.parentNode.className.indexOf(\"expanded\") > -1;\n        if (expanded){\n          ev.target.innerHTML = '▸';\n          ev.target.parentNode.parentNode.classList.remove(\"expanded\");\n        } else {\n          ev.target.innerHTML = '▾';\n          ev.target.parentNode.parentNode.classList.add(\"expanded\");\n        }\n      }\n    }\n    window.onchange = function(ev){\n      console.log(ev.target.id);\n      if (ev.target.id==='newfile'){\n\n        const oFiles = document.getElementById(\"newfile\").files;\n        for (let i=0; i < oFiles.length; i++){\n            const reader = new FileReader();\n            reader.fileToRead = oFiles[i];\n            reader.onload = function(evt) {\n              try {\n                viewer.load_genome_properties_text(evt.target.fileToRead.name, evt.target.result);\n              }catch(e){\n                  alert('Bad formatted file');\n                  console.error(e);\n              }\n            };\n            reader.readAsText(oFiles[i]);\n        }\n      }\n    }\n  }\n  markup2html (txt) {\n    const renderer = new RstRenderer(this.github, this);\n    return renderer.markup2html(txt);\n  }\n  loadContent(pageRequiredToChange=false,key=null) {\n    let content = \"\";\n    switch (location.hash) {\n      case \"#home\": case \"\":\n        content = this.getHome();\n        break;\n      case \"#about\":\n      case \"#calculating\":\n      case \"#docs\":\n      case \"#funding\":\n      case \"#contributing\":\n      case \"#contact\":\n        content = this.getAboutTabs();\n        break;\n      case '#browse':\n      case '#hierarchy':\n      case '#pathways':\n      case '#metapaths':\n      case '#systems':\n      case '#guilds':\n      case '#categories':\n        content = this.getBrowseTabs();\n        break;\n      case \"#viewer\":\n        this.container.innerHTML = this.getViewerHTML();\n        this.loadViewer();\n        return;\n      default:\n        if (location.hash.match(/^#GenProp\\d{4}$/)){\n          content = this.getGenProp(location.hash.substr(1));\n        }else if (pageRequiredToChange){\n            content = \"404: Not found\";\n        }// console.log(\"other\", location.hash);\n    }\n    if (key && key.startsWith(\"INCLUDE_\") && key in this.cache){\n      content = content.replace(key, this.markup2html(this.cache[key]));\n      this.cache[location.hash] = content;\n    }\n    this.container.innerHTML = content;\n  }\n  embbedInSection(html){\n    return `\n    <div class=\"columns\">\n      <section>\n        ${html}\n      </section>\n    </div>\n    `;\n  }\n  getResource(key, url, loader, template_tag=null,embbedInSection=true){\n    if (key in this.cache)\n      return this.cache[key];\n    fetch(url)\n      .then(a=>a.text())\n      .then(a=>{\n        const html = loader(a);\n        this.cache[key] = embbedInSection ? this.embbedInSection(html): html;\n        this.loadContent(true, key);\n      })\n      .catch(a=>console.error(a));\n    return template_tag===null ? this.embbedInSection('loading...') : template_tag;\n  }\n  renderGenProp(property){\n    return `\n    <h2>${property.accession}</h2>\n      <h3>${property.name}</h3>\n      <span class=\"tag\">${property.type}</span> <span class=\"tag secondary\">Threshold: ${property.threshold}</span>\n      <br/><br/>\n      <div class=\"row\">\n        <h4>Description</h4>\n        <p>${this.renderDescription(property.description, property.accession)}</p>\n      </div>\n      <div class=\"row\">\n        <h4>Steps</h4>\n        <div class=\"medium-3 columns\">\n          <ul class=\"vertical tabs\" data-tabs id=\"step-tabs\">\n            ${property.steps.map((step,i) => `\n              <li class=\"tabs-title ${i===0?'is-active':''}\">\n                <a target=\"#panel${step.number}\" ${i===0?'aria-selected=\"true\"':''}>\n                  ${step.number}. ${step.id}\n                </a>\n              </li>\n            `).join('')}\n          </ul>\n        </div>\n        <div class=\"medium-9 columns\">\n          <div class=\"tabs-content\" data-tabs-content=\"step-tabs\">\n          ${property.steps.map((step,i) => `\n            <div class=\"tabs-panel ${i===0?'is-active':''}\" id=\"panel${step.number}\">\n              <h5>${step.id}</h5>\n              ${step.requires===\"1\"?'<span class=\"tag\">Required</span>':''}\n              <table>\n                <tr>\n                  <th>Evidence</th>\n                  <th>Go Terms</th>\n                </tr>\n                ${step.evidence_list.map((e,i) => `\n                  <tr>\n                    <td>${this.renderEvidence(e.evidence)}</td>\n                    <td>${this.renderEvidence(e.go)}</td>\n                  </tr>\n                `).join('')}\n              </table>\n            </div>\n          `).join('')}\n          </div>\n        </div>\n      </div>\n      <div class=\"row\">\n        <h4>Database Links</h4>\n        <ul>\n          ${property.databases.map(db => `\n            <li>${this.renderDatabaseLink(db.title, db.link)}</li>\n          `).join('')}\n        </ul>\n      </div>\n      <div class=\"row\">\n        <h4>References</h4>\n        <ul class=\"references\">\n          ${property.references.map(ref => `\n              <li class=\"reference\" id=\"${property.accession}-${ref.number}\">\n                <span class=\"index\">[${ref.number}]</span>\n                <span class=\"authors\">${ref.author}</span>\n                <span class=\"title\">${ref.title}</span>\n                <span class=\"citation\">${ref.citation}</span>\n                <span class=\"reference_id\">${ref.PMID}</span>\n                <a target=\"_blank\" rel=\"noopener\" href=\"https://europepmc.org/abstract/MED/${ref.PMID}\">EuropePMC</a>\n              </li>\n          `).join('')}\n        </ul>\n      </div>\n\n    `;\n  }\n  renderDescription(txt, acc){\n    return txt.replace(/\\[(\\d+)\\]/g, `<a href=\"#${acc}-$1\">[$1]</a>`);\n  }\n  renderDatabaseLink(title, link){\n    let a = link;\n    const parts = link.split(';').map(p => p.trim());\n    if (parts[0] === 'KEGG')\n      a = `<a\n        href=\"http://www.genome.jp/dbget-bin/www_bget?pathway:${parts[1]}\"\n      >KEGG</a>`;\n    else if (parts[0] === 'IUBMB')\n      a = `<a\n        href=\"http://www.chem.qmul.ac.uk/iubmb/enzyme/reaction/${parts[1]}/${parts[2]}.html\"\n      >IUBMB</a>`\n    else if (parts[0] === 'MetaCyc')\n      a = `<a\n        href=\"https://metacyc.org/META/NEW-IMAGE?type=NIL&object=${parts[1]}\"\n      >MetaCyc</a>`\n    return `<b>${title}</b>: ${a}`;\n  }\n  renderEvidence(txt){\n    if (!txt) return '';\n    const parts = txt.split(';');\n    return parts\n      .filter(p => p.trim()!=='')\n      .map(t => {\n        const term = t.trim();\n        if (term.startsWith(\"GO:\"))\n          return `<a href=\"http://www.ebi.ac.uk/QuickGO/GTerm?id=${term}\">${term}</a>`\n        if (term.startsWith(\"GenProp\"))\n          return `<a href=\"#${term}\">${term}</a>`\n        if (term.startsWith(\"IPR\"))\n          return `<a href=\"https://www.ebi.ac.uk/interpro/entry/${term}\">${term}</a>`\n        if (term.startsWith(\"TIGR\"))\n          return `<a href=\"http://www.jcvi.org/cgi-bin/tigrfams/HmmReportPage.cgi?acc=${term}\">${term}</a>`\n        else {\n          return term;\n        }\n      }).join(' - ')\n  }\n  renderGenPropHierarchy(hierarchy, expanded=true, level=1){\n    // console.log(hierarchy)\n    return `\n    <div class=\"genome-property ${expanded?'expanded':''}\">\n      <header>\n        ${!hierarchy.children.length?'・':`\n        <a style=\"border: 0;color: darkred;\">${expanded?'▾':'▸'}</a>\n        `}\n        <a href=\"#${hierarchy.id}\">${hierarchy.id}</a>: ${hierarchy.name}\n      </header>\n      ${!hierarchy.children.length?'':`\n        <div class=\"children\" style=\"\n          margin-left: ${level*10}px;\n        \">\n          ${hierarchy.children\n            .map(child => this.renderGenPropHierarchy(child, false, level+1))\n            .join('')}\n        </div>\n      `}\n    </div>\n    `;\n  }\n  getViewerHTML() {\n    return `\n      <div class=\"container\">\n        <div class=\"top-block\">\n            <div id=\"gp-controllers\" class=\"top-controllers\">\n                <div>\n                    <header>Load Genome Properties</header>\n                    <ul>\n                        <li><label for=\"tax-search\">From Taxonomy:</label>\n                            <input type=\"text\" id=\"tax-search\">\n                        </li>\n                        <li>\n                            <label for=\"newfile\">From a File: </label>\n                            <input type=\"file\" id=\"newfile\"/>\n                        </li>\n                    </ul>\n                </div>\n                <div>\n                    <header>Filter Properties</header>\n                    <ul>\n                        <li><label for=\"gp-selector\">By Top level category:</label>\n                            <div id=\"gp-selector\" class=\"selector\"></div>\n                        </li>\n                        <li><label for=\"gp-filter\">by Text:</label>\n                            <input type=\"text\" id=\"gp-filter\">\n                        </li>\n                    </ul>\n                </div>\n                <div>\n                    <header>Labels</header>\n                    <ul>\n                      <li><label for=\"tax_label\">Species:</label>\n                          <select id=\"tax_label\">\n                              <option value=\"name\">Species</option>\n                              <option value=\"id\">Tax ID</option>\n                              <option value=\"both\">Both</option>\n                          </select>\n                      </li>\n                        <li><label for=\"gp_label\">Properties:</label>\n                            <select id=\"gp_label\">\n                                <option value=\"name\">Name</option>\n                                <option value=\"id\">ID</option>\n                                <option value=\"both\">Both</option>\n                            </select>\n                        </li>\n                    </ul>\n                </div>\n                <div class=\"gp-legends\">\n                    <header>Legends</header>\n                </div>\n                <a class=\"minimise\"></a>\n            </div>\n        </div>\n        <div id=\"gp-viewer\"></div>\n        <div class=\"info-tooltip\"></div>\n    </div>`\n  }\n  loadViewer(){\n    var d3 = gpv.d3,\n            GenomePropertiesViewer = gpv.GenomePropertiesViewer,\n            viewer = new GenomePropertiesViewer({\n                element_selector: \"#gp-viewer\",\n                controller_element_selector: \"#gp-selector\",\n                server: `${this.github}/docs/release/GP_calculation/SUMMARY_FILE_`,\n                hierarchy_path: `${this.github}/docs/release/hierarchy.json`,\n                whitelist_path: \"https://raw.githubusercontent.com/ProteinsWebTeam/genome-properties-viewer/master/test-files/gp_white_list.json\",\n                server_tax: `${this.github}/docs/release/taxonomy.json`,\n                height: 400\n            });\n      window.viewer = viewer;\n      d3.select(\".minimise\").on(\"click\",(d,i,c)=>{\n          const on = d3.select(c[i]).classed(\"on\");\n          d3.selectAll(\".top-controllers>div\")\n                  .style(\"max-height\", on?\"0px\":\"500px\")\n                  .style(\"overflow\", on?null:\"hidden\")\n                  .transition(200)\n                  .style(\"max-height\", on?\"500px\":\"0px\")\n                  .style(\"opacity\", on?1:0);\n          d3.selectAll(\".top-controllers\").transition(200).style(\"padding\", on?\"5px\":\"0px\");\n          d3.select(c[i]).classed(\"on\", !on);\n      });\n  }\n  getGenProp(acc){\n    const url = `${this.github}/data/${acc}/DESC`\n    return this.getResource(acc, url, txt => this.renderGenProp(parseGenProp(txt)))\n  }\n  getHome(){\n    // return this.markup2html(text);\n    return this.getResource('#home', `${this.github}/docs/landing.rst?`,this.markup2html.bind(this));\n  }\n  getAboutTabs() {\n    const resource = {\n      \"#about\": '/docs/background.rst',\n      \"#calculating\": '/docs/calculating.rst',\n      \"#docs\": '/docs/index.rst',\n      \"#funding\": '/docs/funding.rst',\n      \"#contributing\": '/docs/contributing.rst',\n      \"#contact\": '/docs/contact.rst',\n    };\n    const tabs = [\n      'About', 'Calculating', 'Docs',\n      'Funding', 'Contributing', 'Contact'\n    ];\n    return this.getContentTabs(resource,tabs,this.markup2html.bind(this));\n  }\n  getBrowseTabs() {\n    const resource = {\n      \"#pathways\": '/docs/_stats/stats.PATHWAY',\n      \"#metapaths\": '/docs/_stats/stats.METAPATH',\n      \"#systems\": '/docs/_stats/stats.SYSTEM',\n      \"#guilds\": '/docs/_stats/stats.GUILD',\n      \"#categories\": '/docs/_stats/stats.CATEGORY',\n    };\n\n    const tabs = [\n      'Hierarchy', 'Pathways', 'Metapaths',\n      'Systems', 'Guilds', 'Categories'\n    ];\n    return this.getContentTabs(resource,tabs,this.renderStatsFile);\n  }\n  getContentTabs(resource, tabs, renderer) {\n    return `\n      <ul class=\"tabs\" data-tabs id=\"browse-tabs\">\n      ${tabs.map(tab => {\n        const hash = '#'+tab.toLowerCase();\n        const isActive = hash === location.hash;\n        return `\n          <li class=\"tabs-title ${isActive?'is-active':''}\" >\n            <a ${isActive?'aria-selected=\"true\"':''} href=\"${hash}\">${tab}</a>\n          </li>`;\n        }).join('')\n      }\n      </ul>\n      <br/>\n      ${\n        (location.hash==='#hierarchy' || location.hash==='#browse') ?\n          this.getProps() :\n          this.getResource(\n            location.hash,\n            `${this.github}${resource[location.hash]}`,\n            renderer\n          )\n        }\n    `\n  }\n  renderStatsFile(txt){\n    return `\n    <div id=\"content-browse-tab\">\n      <ul>\n        ${txt.split('\\n').map(line=>{\n          if (line.trim()===\"\") return \"\";\n          const gp =line.split('\\t');\n          return `\n            <li>\n              <a href=\"#${gp[0]}\">${gp[0]}</a>: ${gp[1]}\n            </li>`\n        }).join('')}\n      </ul>\n    </div>`;\n  }\n  getProps(){\n    return this.getResource('props', 'files/gp.dag2.txt', txt => {\n      return this.renderGenPropHierarchy(parseGenPropHierarchy(txt)['GenProp0065'])\n    })\n  }\n}\n\nexport default GenomePropertiesWebsite;\n"],"names":["mainKeys","refKeys","stepKeys","parseGenProp","txt","property","currentRef","currentDB","currentStep","currentEV","split","forEach","key","line","substr","value","trim","number","Number","replace","references","push","title","databases","description","notes","steps","evidence","evidence_list","parseGenPropHierarchy","ignore","hierarchy","parts","indexOf","children","blockType","RstRenderer","server","manager","converter","showdown","Converter","substitutions","block","obj","lines","length","type","SUBSTITUTION","parts2","INCLUDE","OTHER","i","attr","attributes","slice","join","text","map","objBlock","parseBlock","getResource","markup2html","bind","list","Object","keys","filter","k","newText","replacement","renderHTMLAtrributes","target","onTable","isRow","l","partOfTable","extractBlocks","applySubstitutions","toMDTables","makeHtml","GenomePropertiesWebsite","selector","container","document","querySelector","github","onhashchange","loadContent","cache","onclick","ev","location","hash","match","localName","parentNode","className","querySelectorAll","e","setAttribute","classList","remove","add","getAttribute","expanded","innerHTML","onchange","log","id","oFiles","getElementById","files","reader","FileReader","fileToRead","onload","evt","load_genome_properties_text","name","result","error","readAsText","renderer","pageRequiredToChange","content","getHome","getAboutTabs","getBrowseTabs","getViewerHTML","loadViewer","getGenProp","startsWith","html","url","loader","template_tag","embbedInSection","then","a","catch","console","accession","threshold","renderDescription","step","requires","renderEvidence","go","renderDatabaseLink","db","link","ref","author","citation","PMID","acc","p","term","t","level","renderGenPropHierarchy","child","d3","gpv","GenomePropertiesViewer","viewer","select","on","d","c","classed","selectAll","style","transition","renderGenProp","resource","tabs","getContentTabs","renderStatsFile","tab","toLowerCase","isActive","getProps","gp"],"mappings":"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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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"}